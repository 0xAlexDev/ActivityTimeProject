"use strict";(self.webpackChunkActivityTime=self.webpackChunkActivityTime||[]).push([[449],{7449:(V,u,r)=>{r.r(u),r.d(u,{ActivityZoneModule:()=>A});var g=r(6895),d=r(8869),t=r(4650),f=r(8552),l=r(6970),x=r(5020),C=r(4563),m=r(3066),v=r(1773),p=r(4006),y=r(7392);let w=(()=>{class a{constructor(e,n){this.apiService=e,this.loadingService=n,this.searchResultEmitter=new t.vpe,this.placeholder="Insert Zone"}ngOnInit(){}SearchUser(){let e=document.getElementsByTagName("input")[0].value.toString();var n=[];null!=e&&""!=e?(this.loadingService.show(),this.apiService.GetActivityForZone(e).subscribe(i=>{if("ERR"!=i.resp&&"EMPTY"!=i.resp){var o=0;if("EMPTY"!=i.resp&&"ERR"!=i.resp)for(;i.resp.activities[o];){let T=i.resp.activities[o].id,O=i.resp.activities[o].title,P=i.resp.activities[o].description,F=new Date(i.resp.activities[o].date),D=i.resp.activities[o].time_start,U=i.resp.activities[o].time_end,E=i.resp.activities[o].city,L=i.resp.activities[o].address,N=i.resp.activities[o].type,B=new m.D(i.resp.activities[o].founder.name,i.resp.activities[o].founder.surname,i.resp.activities[o].founder.email,i.resp.activities[o].founder.url_photo),h=[],c=0;for(;i.resp.activities[o].partecipants[c];)h.push(new m.F(i.resp.activities[o].partecipants[c].name,i.resp.activities[o].partecipants[c].surname,i.resp.activities[o].partecipants[c].email,i.resp.activities[o].partecipants[c].url_photo,i.resp.activities[o].partecipants[c].status)),c+=1;n.push(new C.R(T,O,P,F,D,U,E,L,B,h,N)),o+=1}}this.loadingService.hide(),this.searchResultEmitter.emit(n)})):(this.loadingService.hide(),this.searchResultEmitter.emit(n))}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(v.s),t.Y36(l.b))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-search-bar-activity-zone"]],outputs:{searchResultEmitter:"searchResultEmitter"},decls:11,vars:1,consts:[["id","TextfieldContainer",1,"valid"],["id","InputField"],["type","text","required",""],[1,"iconsContainer"],[1,"icon",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"h2"),t.TgZ(2,"form")(3,"div",1),t._UZ(4,"input",2),t.TgZ(5,"label"),t._uU(6),t.qZA(),t._UZ(7,"span"),t.qZA()(),t.TgZ(8,"div",3)(9,"mat-icon",4),t.NdJ("click",function(){return n.SearchUser()}),t._uU(10,"search"),t.qZA()()()),2&e&&(t.xp6(6),t.Oqu(n.placeholder))},dependencies:[p._Y,p.JL,p.F,y.Hw],styles:['.icon[_ngcontent-%COMP%]{position:absolute;top:40px;right:60px;transform:scale(3);z-index:10}.iconsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:left;margin-left:50px;color:#6495ed}.icon[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(3.5);transition:transform .2s ease-in-out}.icon[_ngcontent-%COMP%]:not(:hover){transform:scale(3);transition:transform .2s ease-in-out}.valid[_ngcontent-%COMP%]{position:relative;width:100%;padding:40px;background:white;border:3px solid cornflowerblue;border-radius:100px}#InputField[_ngcontent-%COMP%]{position:relative;height:15px;width:85%}#InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{position:absolute;background:transparent;border:none;box-shadow:none;font-size:20px;color:#6495ed;width:100%}#InputField[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:2px;left:0;color:gray;pointer-events:none;display:block;transition:.5s}#InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], #InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:valid + label[_ngcontent-%COMP%]{transform:translateY(-30px);font-size:14px;color:#fff;background:cornflowerblue;padding:2px 6px}#InputField[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;bottom:-10px;right:0;display:block;background:grey;width:100%;height:2px}#InputField[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:cornflowerblue;transform:scaleX(0);transform-origin:right;transition:transform .5s ease-in-out}#InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus ~ span[_ngcontent-%COMP%]:before, #InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:valid ~ span[_ngcontent-%COMP%]:before{transform:scaleX(1);transform-origin:left;transition:transform .5s ease-in-out}.invalid[_ngcontent-%COMP%]{position:relative;width:100%;padding:40px;background:white;border:3px solid red;border-radius:100px}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;outline:none}']}),a})(),S=(()=>{class a{constructor(e,n,i){this.dataSessionService=e,this.loadingService=n,this.apiService=i,this.idActivity=0,this.activityTitle="",this.activityCity="",this.activityAddress="",this.activityDate=new Date,this.activityTimeStart="",this.activityTimeEnd="",this.activityFounderName="",this.activityFounderSurname="",this.activityFounderEmail="",this.activityDescription="",this.notificationSendEmitter=new t.vpe}ngOnInit(){}SendRequestForJoin(){let e=new Map;e.set("type","join_request"),e.set("cod_usr",this.activityFounderEmail),e.set("cod_sender",this.dataSessionService.getUser().email),e.set("cod_activity",this.idActivity),e.set("status_notification","N"),e.set("activity_title",this.activityTitle),e.set("date",this.activityDate.getFullYear()+"-"+(this.activityDate.getMonth()+1)+"-"+this.activityDate.getDate()),e.set("time_start",this.activityTimeStart),e.set("time_end",this.activityTimeEnd),this.loadingService.show(),this.apiService.AddNotification(e).subscribe(()=>{this.notificationSendEmitter.emit("join_request")})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.C),t.Y36(l.b),t.Y36(v.s))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-activity-zone-field"]],inputs:{idActivity:"idActivity",activityTitle:"activityTitle",activityCity:"activityCity",activityAddress:"activityAddress",activityDate:"activityDate",activityTimeStart:"activityTimeStart",activityTimeEnd:"activityTimeEnd",activityFounderName:"activityFounderName",activityFounderSurname:"activityFounderSurname",activityFounderEmail:"activityFounderEmail",activityDescription:"activityDescription"},outputs:{notificationSendEmitter:"notificationSendEmitter"},decls:49,vars:12,consts:[[1,"mainContainer"],[1,"row",2,"padding-top","30px"],[1,"data"],[1,"row"],[1,"row",2,"width","82%","padding-bottom","10px"],[1,"joinButtonContainer"],[1,"icon",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"b"),t._uU(3,"Title"),t.qZA(),t.TgZ(4,"span",2),t._uU(5),t.qZA()(),t.TgZ(6,"div",3)(7,"b"),t._uU(8,"City"),t.qZA(),t.TgZ(9,"span",2),t._uU(10),t.qZA()(),t.TgZ(11,"div",3)(12,"b"),t._uU(13,"Address"),t.qZA(),t.TgZ(14,"span",2),t._uU(15),t.qZA()(),t.TgZ(16,"div",3)(17,"b"),t._uU(18,"Date"),t.qZA(),t.TgZ(19,"span",2),t._uU(20),t.qZA()(),t.TgZ(21,"div",3)(22,"b"),t._uU(23,"Time"),t.qZA(),t.TgZ(24,"span",2),t._uU(25),t.qZA()(),t.TgZ(26,"div",3)(27,"b"),t._uU(28,"Founder"),t.qZA(),t.TgZ(29,"span",2)(30,"b"),t._uU(31,"Name: "),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"span",2)(34,"b"),t._uU(35,"Surname: "),t.qZA(),t._uU(36),t.qZA(),t.TgZ(37,"span",2)(38,"b"),t._uU(39,"Email: "),t.qZA(),t._uU(40),t.qZA()(),t.TgZ(41,"div",4)(42,"b"),t._uU(43,"Description"),t.qZA(),t.TgZ(44,"span",2),t._uU(45),t.qZA()(),t.TgZ(46,"div",5)(47,"mat-icon",6),t.NdJ("click",function(){return n.SendRequestForJoin()}),t._uU(48,"add_circle_outline"),t.qZA()()()),2&e&&(t.xp6(5),t.Oqu(n.activityTitle),t.xp6(5),t.Oqu(n.activityCity),t.xp6(5),t.Oqu(n.activityAddress),t.xp6(5),t.lnq("",n.activityDate.getDate(),"-",n.activityDate.getMonth()+1,"-",n.activityDate.getFullYear(),""),t.xp6(5),t.AsE("",n.activityTimeStart," - ",n.activityTimeEnd,""),t.xp6(7),t.Oqu(n.activityFounderName),t.xp6(4),t.Oqu(n.activityFounderSurname),t.xp6(4),t.Oqu(n.activityFounderEmail),t.xp6(5),t.Oqu(n.activityDescription))},dependencies:[y.Hw],styles:[".mainContainer[_ngcontent-%COMP%]{height:290px;width:250px;background-color:#6495ed;border-radius:50px;display:flex;flex-direction:column;justify-content:flex-start;overflow:scroll}.row[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:65%;word-wrap:break-word;padding-left:30px;font-size:18px;padding-top:15px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;color:#fff}.data[_ngcontent-%COMP%]{margin-top:6px;font-weight:400;font-size:16px}.mainContainer[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.joinButtonContainer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-left:200px;position:absolute;padding-top:35px}.icon[_ngcontent-%COMP%]{color:#fff;background-color:transparent;position:relative;transform:scale(1.7);z-index:10}@media only screen and (min-width: 500px){.mainContainer[_ngcontent-%COMP%]{height:420px;width:300px;background-color:#6495ed;border-radius:50px;display:flex;flex-direction:column;justify-content:flex-start;overflow:scroll}.row[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:65%;word-wrap:break-word;padding-left:30px;font-size:18px;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;color:#fff}.data[_ngcontent-%COMP%]{margin-top:6px;font-weight:400;font-size:16px}.mainContainer[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.joinButtonContainer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-left:240px;position:absolute;padding-top:30px}.icon[_ngcontent-%COMP%]{color:#fff;background-color:transparent;position:relative;transform:scale(1.7);z-index:10}.icon[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(2);transition:transform .2s ease-in-out}.icon[_ngcontent-%COMP%]:not(:hover){transform:scale(1.7);transition:transform .2s ease-in-out}}"]}),a})();function _(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-activity-zone-field",8),t.NdJ("notificationSendEmitter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.notificationSendTrigger())}),t.qZA(),t.BQk()}if(2&a){const e=s.$implicit;t.xp6(1),t.Q6J("idActivity",e.ID)("activityTitle",e.title)("activityCity",e.city)("activityAddress",e.address)("activityDate",e.date)("activityTimeStart",e.timeStart)("activityTimeEnd",e.timeEnd)("activityFounderName",e.founder.name)("activityFounderSurname",e.founder.surname)("activityFounderEmail",e.founder.email)("activityDescription",e.description)}}const b=[{path:"",component:(()=>{class a{constructor(e,n,i){this.dataSessionService=e,this.router=n,this.loadingService=i,this.activityZone=[],this.dataSessionService.getUser()?e.DBfetchUserWithoutToken(this.dataSessionService.getUser().email,this.dataSessionService.getUser().password).then(()=>{}):this.router.navigate(["/login"])}ngOnInit(){}searchBarResultTrigger(e){this.activityZone=[];var n=!1;for(let i of e){for(let o of this.dataSessionService.getUser().activities.concat(this.dataSessionService.getUser().activitiesFounder))o.ID==i.ID&&(n=!0);(Number(i.date.getFullYear())>(new Date).getFullYear()||Number(i.date.getFullYear())<(new Date).getFullYear())&&(n=!0),Number(i.date.getMonth()+1)<(new Date).getMonth()+1&&(console.log("l'attivit\xe0 con id "+i.ID+" \xe8 di un mese passato"),console.log(Number(i.date.getMonth()+1)+" "+console.log((new Date).getMonth()+1)),n=!0),Number(i.date.getMonth()+1)==(new Date).getMonth()+1&&Number(i.date.getDate())<(new Date).getUTCDate()&&Number(i.timeStart.split(":")[0])<(new Date).getHours()&&(console.log("l'attivit\xe0 con id "+i.ID+" \xe8 di un giorno passato di questo mese"),n=!0),Number(i.date.getMonth()+1)==(new Date).getMonth()+1&&Number(i.date.getDate())==(new Date).getUTCDate()&&Number(i.timeStart.split(":")[0])<(new Date).getHours()&&(console.log("l'attivit\xe0 con id "+i.ID+" \xe8 gi\xe0 passata1"),n=!0),Number(i.date.getMonth()+1)==(new Date).getMonth()+1&&Number(i.date.getDate())==(new Date).getUTCDate()&&Number(i.timeStart.split(":")[0])==(new Date).getHours()&&Number(i.timeStart.split(":")[1])<=(new Date).getMinutes()&&(console.log("l'attivit\xe0 con id "+i.ID+" \xe8 gi\xe0 passata2"),n=!0);for(let o of this.dataSessionService.getUser().inProgressNotifications)o.cod_activity==i.ID&&"N"==o.status_notification&&(n=!0);0==n&&this.activityZone.push(i),n=!1}}notificationSendTrigger(){console.log("\xe8 stata inviata una notifica"),this.dataSessionService.DBfetchUserWithoutToken(this.dataSessionService.getUser().email,this.dataSessionService.getUser().password).then(()=>{this.searchBarResultTrigger(this.activityZone),this.loadingService.hide()})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(f.C),t.Y36(d.F0),t.Y36(l.b))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-activity-zone"]],decls:11,vars:1,consts:[["id","Title"],["id","gridContainer"],["id","searchBar"],[3,"searchResultEmitter"],["id","resultSearch"],[2,"padding-bottom","20px","padding-left","20px"],[1,"container"],[4,"ngFor","ngForOf"],[3,"idActivity","activityTitle","activityCity","activityAddress","activityDate","activityTimeStart","activityTimeEnd","activityFounderName","activityFounderSurname","activityFounderEmail","activityDescription","notificationSendEmitter"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1,"ActivityZone"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"app-search-bar-activity-zone",3),t.NdJ("searchResultEmitter",function(o){return n.searchBarResultTrigger(o)}),t.qZA()(),t.TgZ(5,"div",4)(6,"span",5),t._uU(7,"Activity"),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,_,2,11,"ng-container",7),t.qZA()()(),t._UZ(10,"app-side-menu")),2&e&&(t.xp6(9),t.Q6J("ngForOf",n.activityZone))},dependencies:[g.sg,x.V,w,S],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%;margin:0}app-activity-zone-field[_ngcontent-%COMP%]{padding:0 10px 10px}#Title[_ngcontent-%COMP%]{position:relative;color:#6495ed;display:flex;width:100%;justify-content:flex-start;padding-bottom:40px;padding-left:70px;font-size:30px;font-weight:700;padding-top:30px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}#gridContainer[_ngcontent-%COMP%]{display:grid;height:520px;width:100%;grid-template-columns:[c1] 68% [c2] 31%;grid-template-rows:[r1] 25% [r2] 75% [r3] 75%}#searchBar[_ngcontent-%COMP%]{width:98%;grid-column:c1/span 2;grid-template-rows:r1/span 1;margin-left:2%;margin-right:2%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center}#resultSearch[_ngcontent-%COMP%]{border:3px solid cornflowerblue;width:95%;grid-column:c1/span 2;grid-template-rows:r2/span 2;border-radius:30px;margin-left:2%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:flex-start;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000;color:#6495ed;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-search-bar-activity-zone[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{overflow:scroll;position:relative;color:#6495ed;display:flex;flex-direction:row;width:100%;justify-content:flex-start;padding-bottom:20px;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-friend-field[_ngcontent-%COMP%]{margin-bottom:3px}@media only screen and (min-width: 500px){#Title[_ngcontent-%COMP%]{position:relative;color:#6495ed;display:flex;width:100%;justify-content:flex-start;padding-bottom:40px;padding-left:80px;font-size:40px;font-weight:700;padding-top:30px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}#gridContainer[_ngcontent-%COMP%]{margin-left:6%;display:grid;height:690px;width:100%;grid-template-columns:[c1] 68% [c2] 25%;grid-template-rows:[r1] 25% [r2] 75%}#searchBar[_ngcontent-%COMP%]{grid-column:c1/span 2;grid-template-rows:r1/span 1;margin-left:2%;margin-right:2%;display:flex;overflow:hidden;flex-wrap:wrap;justify-content:center}#resultSearch[_ngcontent-%COMP%]{width:99%;border:3px solid cornflowerblue;grid-column:c1/span 2;grid-template-rows:r2/span 2;border-radius:30px;margin-left:0%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:flex-start;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000;color:#6495ed;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-search-bar-activity-zone[_ngcontent-%COMP%]{width:50%}.container[_ngcontent-%COMP%]{overflow:scroll;position:relative;color:#6495ed;display:flex;flex-direction:row;width:100%;justify-content:flex-start;padding-bottom:20px;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-friend-field[_ngcontent-%COMP%]{margin-bottom:3px}}#resultSearch[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),a})()}];let Z=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[d.Bz.forChild(b),d.Bz]}),a})();var M=r(9360);let A=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.ez,Z,M.q]}),a})()}}]);
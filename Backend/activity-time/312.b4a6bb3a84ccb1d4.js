"use strict";(self.webpackChunkActivityTime=self.webpackChunkActivityTime||[]).push([[312],{5312:(T,f,s)=>{s.r(f),s.d(f,{FriendPageModule:()=>U});var l=s(6895),d=s(8869),e=s(4650),m=s(8552),c=s(6970),h=s(5020),x=s(3066),u=s(1773),p=s(4006),g=s(7392);let v=(()=>{class t{constructor(n,i){this.apiService=n,this.loadingService=i,this.searchResultEmitter=new e.vpe,this.placeholder="Search User"}ngOnInit(){}SearchUser(){let n=document.getElementsByTagName("input")[0].value.toString();var i=[];null!=n&&""!=n?(this.loadingService.show(),this.apiService.GetUserForFriend(n).subscribe(o=>{if("ERR"!=o.resp&&"EMPTY"!=o.resp){var a=0;for(console.log(o.resp.friendlist[a]);o.resp.friendlist[a];)i.push(new x.D(o.resp.friendlist[a].name,o.resp.friendlist[a].surname,o.resp.friendlist[a].email,o.resp.friendlist[a].url_photo)),a++}this.loadingService.hide(),this.searchResultEmitter.emit(i)})):(this.loadingService.hide(),this.searchResultEmitter.emit(i))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.s),e.Y36(c.b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-bar"]],outputs:{searchResultEmitter:"searchResultEmitter"},decls:11,vars:1,consts:[["id","TextfieldContainer",1,"valid"],["id","InputField"],["type","text","required",""],[1,"iconsContainer"],[1,"icon",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"h2"),e.TgZ(2,"form")(3,"div",1),e._UZ(4,"input",2),e.TgZ(5,"label"),e._uU(6),e.qZA(),e._UZ(7,"span"),e.qZA()(),e.TgZ(8,"div",3)(9,"mat-icon",4),e.NdJ("click",function(){return i.SearchUser()}),e._uU(10,"search"),e.qZA()()()),2&n&&(e.xp6(6),e.Oqu(i.placeholder))},dependencies:[p._Y,p.JL,p.F,g.Hw],styles:['.icon[_ngcontent-%COMP%]{position:absolute;top:40px;right:60px;transform:scale(3);z-index:10}.iconsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;align-items:left;margin-left:50px;color:#6495ed}.icon[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(3.5);transition:transform .2s ease-in-out}.icon[_ngcontent-%COMP%]:not(:hover){transform:scale(3);transition:transform .2s ease-in-out}.valid[_ngcontent-%COMP%]{position:relative;width:100%;padding:40px;background:white;border:3px solid cornflowerblue;border-radius:100px}#InputField[_ngcontent-%COMP%]{position:relative;height:15px;width:85%}#InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{position:absolute;background:transparent;border:none;box-shadow:none;font-size:20px;color:#6495ed;width:100%}#InputField[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:2px;left:0;color:gray;pointer-events:none;display:block;transition:.5s}#InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], #InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:valid + label[_ngcontent-%COMP%]{transform:translateY(-30px);font-size:14px;color:#fff;background:cornflowerblue;padding:2px 6px}#InputField[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;bottom:-10px;right:0;display:block;background:grey;width:100%;height:2px}#InputField[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:cornflowerblue;transform:scaleX(0);transform-origin:right;transition:transform .5s ease-in-out}#InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus ~ span[_ngcontent-%COMP%]:before, #InputField[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:valid ~ span[_ngcontent-%COMP%]:before{transform:scaleX(1);transform-origin:left;transition:transform .5s ease-in-out}.invalid[_ngcontent-%COMP%]{position:relative;width:100%;padding:40px;background:white;border:3px solid red;border-radius:100px}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box;outline:none}']}),t})();function _(t,r){if(1&t&&(e.TgZ(0,"div",7),e._UZ(1,"img",8),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngClass",n.showAllData?"UserImageBig":"UserImageLittle")}}function w(t,r){1&t&&(e.TgZ(0,"div",7),e._UZ(1,"img",9),e.qZA())}function C(t,r){if(1&t&&(e.TgZ(0,"div",2)(1,"span"),e._uU(2,"Email"),e.qZA(),e.TgZ(3,"span",3),e._uU(4),e.qZA()()),2&t){const n=e.oxw();e.xp6(4),e.Oqu(n.email)}}function b(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.SendFriendRequest())}),e.TgZ(1,"mat-icon",11),e._uU(2,"add_circle_outline"),e.qZA()()}}let P=(()=>{class t{constructor(n,i,o){this.apiService=n,this.dataSessionService=i,this.loadingService=o,this.showAllData=!0,this.name="",this.surname="",this.email="",this.notificationSenderEmitter=new e.vpe}ngOnInit(){}SendFriendRequest(){let n=new Map;n.set("type","friend_request"),n.set("cod_usr",this.email),n.set("cod_sender",this.dataSessionService.getUser().email),n.set("cod_activity",0),n.set("status_notification","N"),n.set("activity_title","empty"),n.set("date","00-00-00"),n.set("time_start","00:00"),n.set("time_end","00:00"),this.loadingService.show(),this.apiService.AddNotification(n).subscribe(()=>{this.notificationSenderEmitter.emit("friend_request")})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.s),e.Y36(m.C),e.Y36(c.b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-friend-field"]],inputs:{showAllData:"showAllData",name:"name",surname:"surname",email:"email"},outputs:{notificationSenderEmitter:"notificationSenderEmitter"},decls:16,vars:7,consts:[["id","imagePhone","class","iconPhone",4,"ngIf"],["id","imageDesktop","src","/assets/user-photo/png-transparent-avatar-user-computer-icons-software-developer-avatar-child-face-heroes.png","alt","none",3,"ngClass"],[1,"column"],[1,"data"],[1,"column",2,"margin-right","30px"],["class","column",4,"ngIf"],["class","iconsContainer",3,"click",4,"ngIf"],["id","imagePhone",1,"iconPhone"],["src","/assets/user-photo/png-transparent-avatar-user-computer-icons-software-developer-avatar-child-face-heroes.png","alt","none",3,"ngClass"],["src","/assets/user-photo/png-transparent-avatar-user-computer-icons-software-developer-avatar-child-face-heroes.png","alt","none",1,"UserImageLittle"],[1,"iconsContainer",3,"click"],[1,"icon"]],template:function(n,i){1&n&&(e.TgZ(0,"div"),e.YNc(1,_,2,1,"div",0),e.YNc(2,w,2,0,"div",0),e._UZ(3,"img",1),e.TgZ(4,"div",2)(5,"span"),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"span",3),e._uU(8),e.qZA()(),e.TgZ(9,"div",4)(10,"span"),e._uU(11,"Surname"),e.qZA(),e.TgZ(12,"span",3),e._uU(13),e.qZA()(),e.YNc(14,C,5,1,"div",5),e.YNc(15,b,3,0,"div",6),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",i.showAllData),e.xp6(1),e.Q6J("ngIf",!i.showAllData),e.xp6(1),e.Q6J("ngClass",i.showAllData?"UserImageBig":"UserImageLittle"),e.xp6(5),e.Oqu(i.name),e.xp6(5),e.Oqu(i.surname),e.xp6(1),e.Q6J("ngIf",i.showAllData),e.xp6(1),e.Q6J("ngIf",i.showAllData))},dependencies:[l.mk,l.O5,g.Hw],styles:["div[_ngcontent-%COMP%]{width:101%;position:relative;display:inline-block;flex-direction:column;background-color:#87abee;justify-content:flex-start;align-items:flex-start;color:#fff;border-radius:30px}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:20%;margin-bottom:5px;margin-top:10px;font-size:15px;margin-left:4%}.data[_ngcontent-%COMP%]{margin-top:3px;font-weight:400}.icon[_ngcontent-%COMP%]{position:relative;left:6%;transform:scale(2);z-index:10}.iconPhone[_ngcontent-%COMP%]{position:absolute;right:20%;width:50px;top:10%;height:50px;z-index:10}.iconsContainer[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:100%;align-items:left;justify-content:left;margin-bottom:20px;padding-top:20px;color:#fff}.UserImageBig[_ngcontent-%COMP%], .UserImageLittle[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}#imageDesktop[_ngcontent-%COMP%]{display:none}@media only screen and (min-width: 500px){div[_ngcontent-%COMP%]{width:101%;display:flex;flex-direction:row;background-color:#87abee;justify-content:space-around;align-items:center;color:#fff;border-radius:0}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:20%;margin-bottom:5px;font-size:15px;margin-left:0%}.data[_ngcontent-%COMP%]{margin-top:3px;font-weight:400}.icon[_ngcontent-%COMP%]{position:relative;right:40px;transform:scale(1.7);z-index:10;display:block}#imageDesktop[_ngcontent-%COMP%]{display:block}.iconPhone[_ngcontent-%COMP%]{position:absolute;right:6%;width:100%;height:30px;background-color:red;z-index:10;display:none}.iconsContainer[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;width:5%;padding-top:0;margin-bottom:0;align-items:left;margin-left:50px;color:#fff}.icon[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(2);transition:transform .2s ease-in-out}.icon[_ngcontent-%COMP%]:not(:hover){transform:scale(1.7);transition:transform .2s ease-in-out}.UserImageBig[_ngcontent-%COMP%]{width:4%;height:100%;border-radius:50%}.UserImageLittle[_ngcontent-%COMP%]{width:11%;height:100%;border-radius:50%}}"]}),t})();function y(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"app-friend-field",9),e.NdJ("notificationSenderEmitter",function(o){e.CHM(n);const a=e.oxw();return e.KtG(a.notificationSenderTrigger(o))}),e.qZA(),e.BQk()}if(2&t){const n=r.$implicit;e.xp6(1),e.Q6J("name",n.name)("surname",n.surname)("email",n.email)}}function M(t,r){if(1&t&&(e.ynx(0),e._UZ(1,"app-friend-field",10),e.BQk()),2&t){const n=r.$implicit;e.xp6(1),e.Q6J("name",n.name)("surname",n.surname)("showAllData",!1)}}const O=[{path:"",component:(()=>{class t{constructor(n,i,o){this.dataSessionService=n,this.router=i,this.loadingService=o,this.friendsList=[],this.userFound=[],this.dataSessionService.getUser()?n.DBfetchUserWithoutToken(this.dataSessionService.getUser().email,this.dataSessionService.getUser().password).then(()=>{this.friendsList=[];for(let a of this.dataSessionService.getUser().friends)this.friendsList.push(a);console.log(this.dataSessionService.getUser())}):(console.log("user not set"),this.router.navigate(["/login"]))}searchBarResultTrigger(n){this.userFound=[];var i=!1;for(let o of n){for(let a of this.dataSessionService.getUser().inProgressNotifications)a.email_recipient==o.email&&"N"==a.status_notification&&(i=!0);for(let a of this.dataSessionService.getUser().friends)a.email==o.email&&(i=!0);o.email==this.dataSessionService.getUser().email&&(i=!0),0==i&&this.userFound.push(o),i=!1}}notificationSenderTrigger(n){console.log("\xe8 stata inviata una notifica"),this.dataSessionService.DBfetchUserWithoutToken(this.dataSessionService.getUser().email,this.dataSessionService.getUser().password).then(()=>{this.searchBarResultTrigger(this.userFound),this.loadingService.hide()})}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(m.C),e.Y36(d.F0),e.Y36(c.b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-friend"]],decls:16,vars:2,consts:[["id","Title"],["id","gridContainer"],["id","searchBar"],[3,"searchResultEmitter"],["id","resultSearch"],[1,"container"],[2,"padding-bottom","20px","padding-left","20px"],[4,"ngFor","ngForOf"],["id","friendList"],[3,"name","surname","email","notificationSenderEmitter"],[3,"name","surname","showAllData"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e._uU(1,"Discovery Friends"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"app-search-bar",3),e.NdJ("searchResultEmitter",function(a){return i.searchBarResultTrigger(a)}),e.qZA()(),e.TgZ(5,"div",4)(6,"div",5)(7,"span",6),e._uU(8,"Users"),e.qZA(),e.YNc(9,y,2,3,"ng-container",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",5)(12,"span",6),e._uU(13,"Your Friends"),e.qZA(),e.YNc(14,M,2,3,"ng-container",7),e.qZA()()(),e._UZ(15,"app-side-menu")),2&n&&(e.xp6(9),e.Q6J("ngForOf",i.userFound),e.xp6(5),e.Q6J("ngForOf",i.friendsList))},dependencies:[l.sg,h.V,v,P],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%;margin:0}@media only screen and (min-width: 500px){#Title[_ngcontent-%COMP%]{position:relative;color:#6495ed;display:flex;width:100%;justify-content:flex-start;padding-bottom:40px;padding-left:80px;font-size:40px;font-weight:700;padding-top:30px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}#gridContainer[_ngcontent-%COMP%]{margin-left:6%;display:grid;height:690px;width:100%;grid-template-columns:[c1] 68% [c2] 25%;grid-template-rows:[r1] 25% [r2] 75% [r3] 75%}#searchBar[_ngcontent-%COMP%]{grid-column:c1/span 2;grid-template-rows:r1/span 1;margin-left:2%;margin-right:2%;display:flex;overflow:hidden;flex-wrap:wrap;justify-content:center}#friendList[_ngcontent-%COMP%]{margin-top:0;border:3px solid cornflowerblue;grid-column:c2/span 1;grid-template-rows:r2/span 2;border-radius:30px;margin-right:2%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000}#resultSearch[_ngcontent-%COMP%]{border:3px solid cornflowerblue;grid-column:c1/span 1;grid-template-rows:r2/span 2;border-radius:30px;margin-left:0%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000}app-search-bar[_ngcontent-%COMP%]{width:50%}.container[_ngcontent-%COMP%]{overflow:scroll;position:relative;color:#6495ed;display:flex;flex-direction:column;width:100%;justify-content:flex-start;padding-bottom:20px;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-friend-field[_ngcontent-%COMP%]{margin-bottom:3px}}@media only screen and (max-width: 917px){#resultSearch[_ngcontent-%COMP%]{border:3px solid cornflowerblue;grid-column:c1/span 2;grid-template-rows:r2/span 2;border-radius:30px;margin-left:0%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000;margin-bottom:20px}#friendList[_ngcontent-%COMP%]{border:3px solid cornflowerblue;grid-column:c1/span 2;grid-template-rows:r3/span 1;border-radius:30px;margin-left:0%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000}}@media only screen and (max-width: 499px){#Title[_ngcontent-%COMP%]{position:relative;color:#6495ed;display:flex;width:100%;justify-content:flex-start;padding-bottom:40px;padding-left:70px;font-size:30px;font-weight:700;padding-top:30px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}#gridContainer[_ngcontent-%COMP%]{display:grid;height:520px;width:100%;grid-template-columns:[c1] 68% [c2] 26% [c3] 94%;grid-template-rows:[r1] 25% [r2] 79%}#searchBar[_ngcontent-%COMP%]{grid-column:c1/span 2;grid-template-rows:r1/span 1;margin-left:2%;margin-right:2%;display:flex;overflow:hidden;flex-wrap:wrap;justify-content:center}#friendList[_ngcontent-%COMP%]{border:3px solid cornflowerblue;grid-column:c3/span 1;grid-template-rows:r2/span 2;border-radius:30px;height:94%;margin-left:2%;margin-right:2%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000}#resultSearch[_ngcontent-%COMP%]{border:3px solid cornflowerblue;grid-column:c1/span 2;grid-template-rows:r2/span 2;border-radius:30px;margin-left:2%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000}app-search-bar[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]{overflow:scroll;position:relative;color:#6495ed;display:flex;flex-direction:column;width:100%;justify-content:flex-start;padding-bottom:20px;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-friend-field[_ngcontent-%COMP%]{margin-bottom:3px}}#friendList[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}#resultSearch[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}#searchBar[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(O),d.Bz]}),t})();var F=s(9360);let U=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,S,F.q,g.Ps]}),t})()}}]);
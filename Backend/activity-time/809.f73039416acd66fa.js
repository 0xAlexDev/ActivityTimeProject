"use strict";(self.webpackChunkActivityTime=self.webpackChunkActivityTime||[]).push([[809],{809:(P,f,a)=>{a.r(f),a.d(f,{NotificationsPageModule:()=>O});var r=a(6895),d=a(8869),i=a(4650),l=a(8552),p=a(5020),m=a(1773),u=a(6970),g=a(7392);function v(e,o){1&e&&(i.TgZ(0,"div",13)(1,"mat-icon",14),i._uU(2,"group_add"),i.qZA()())}function h(e,o){1&e&&(i.TgZ(0,"div",13)(1,"mat-icon",14),i._uU(2,"add_location"),i.qZA()())}function _(e,o){1&e&&(i.TgZ(0,"div",15)(1,"mat-icon",14),i._uU(2,"group_add"),i.qZA()())}function y(e,o){1&e&&(i.TgZ(0,"div",16)(1,"mat-icon",14),i._uU(2,"add_location"),i.qZA()())}function T(e,o){if(1&e&&(i.TgZ(0,"div",17)(1,"span"),i._uU(2,"ActivityTitle"),i.qZA(),i.TgZ(3,"span",4),i._uU(4),i.qZA()()),2&e){const t=i.oxw();i.xp6(4),i.Oqu(t.activityTitle)}}function x(e,o){if(1&e&&(i.TgZ(0,"div",3)(1,"span"),i._uU(2,"Date"),i.qZA(),i.TgZ(3,"span",4),i._uU(4),i.qZA()()),2&e){const t=i.oxw();i.xp6(4),i.lnq("",t.activityDate.getDate(),"-",t.activityDate.getMonth()+1,"-",t.activityDate.getFullYear(),"")}}function N(e,o){if(1&e&&(i.TgZ(0,"div",3)(1,"span"),i._uU(2,"Time"),i.qZA(),i.TgZ(3,"span",4),i._uU(4),i.qZA()()),2&e){const t=i.oxw();i.xp6(4),i.AsE("",t.activityTimeStart," - ",t.activityTimeEnd,"")}}let q=(()=>{class e{constructor(t,n,c){this.apiService=t,this.dataSessionService=n,this.loadingService=c,this.idNotification=0,this.idActivity=0,this.requestType="",this.fromName="",this.fromSurname="",this.fromEmail="",this.activityTitle="",this.activityDate=new Date,this.activityTimeStart="",this.activityTimeEnd="",this.notificationAcceptEmitter=new i.vpe}ngOnInit(){console.log(this.activityDate),console.log(this.activityTimeStart),console.log(this.activityTimeEnd)}AcceptRequest(){let t=new Map;"friend_request"==this.requestType?(t.set("cod_usr",this.dataSessionService.getUser().email),t.set("cod_friend",this.fromEmail),this.loadingService.show(),this.apiService.AddFriend(t).subscribe(()=>{this.apiService.DeleteNotification(this.idNotification).subscribe(()=>{this.notificationAcceptEmitter.emit("friend_request"),this.loadingService.hide()})})):"invite_request"==this.requestType?(t.set("cod_usr",this.dataSessionService.getUser().email),t.set("cod_act",this.idActivity),t.set("status","N"),this.loadingService.show(),this.apiService.AddActivityPartecipant(t).subscribe(()=>{this.apiService.DeleteNotification(this.idNotification).subscribe(()=>{this.notificationAcceptEmitter.emit("invite_request"),this.loadingService.hide()})})):"join_request"==this.requestType&&(t.set("cod_usr",this.fromEmail),t.set("cod_act",this.idActivity),t.set("status","N"),this.loadingService.show(),this.apiService.AddActivityPartecipant(t).subscribe(()=>{this.apiService.DeleteNotification(this.idNotification).subscribe(()=>{this.notificationAcceptEmitter.emit("join_request"),this.loadingService.hide()})}))}DenyRequest(){"friend_request"==this.requestType?(this.loadingService.show(),this.apiService.DeleteNotification(this.idNotification).subscribe(()=>{this.notificationAcceptEmitter.emit("friend_request"),this.loadingService.hide()})):"invite_request"==this.requestType?(this.loadingService.show(),this.apiService.DeleteNotification(this.idNotification).subscribe(()=>{this.notificationAcceptEmitter.emit("invite_request"),this.loadingService.hide()})):"join_request"==this.requestType&&(this.loadingService.show(),this.apiService.DeleteNotification(this.idNotification).subscribe(()=>{this.notificationAcceptEmitter.emit("join_request"),this.loadingService.hide()}))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(m.s),i.Y36(l.C),i.Y36(u.b))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-notification-field"]],inputs:{idNotification:"idNotification",idActivity:"idActivity",requestType:"requestType",fromName:"fromName",fromSurname:"fromSurname",fromEmail:"fromEmail",activityTitle:"activityTitle",activityDate:"activityDate",activityTimeStart:"activityTimeStart",activityTimeEnd:"activityTimeEnd"},outputs:{notificationAcceptEmitter:"notificationAcceptEmitter"},decls:30,vars:10,consts:[["class","phoneIcon",4,"ngIf"],["id","icon1Desk","class","column",4,"ngIf"],["id","icon2Desk","class","column",4,"ngIf"],[1,"column"],[1,"data"],[1,"column",2,"margin-right","30px"],["class","column","style","width: 50%;",4,"ngIf"],["class","column",4,"ngIf"],[1,"phoneIcon2",3,"click"],[1,"icon",2,"margin-right","50px"],[1,"icon"],[1,"column",2,"margin-left","100px",3,"click"],[1,"column",3,"click"],[1,"phoneIcon"],[1,"iconNoOversize"],["id","icon1Desk",1,"column"],["id","icon2Desk",1,"column"],[1,"column",2,"width","50%"]],template:function(t,n){1&t&&(i.TgZ(0,"div"),i.YNc(1,v,3,0,"div",0),i.YNc(2,h,3,0,"div",0),i.YNc(3,_,3,0,"div",1),i.YNc(4,y,3,0,"div",2),i.TgZ(5,"div",3)(6,"span"),i._uU(7,"Type"),i.qZA(),i.TgZ(8,"span",4),i._uU(9),i.qZA()(),i.TgZ(10,"div",5)(11,"span"),i._uU(12,"From"),i.qZA(),i.TgZ(13,"span",4),i._uU(14),i.qZA()(),i.YNc(15,T,5,1,"div",6),i.YNc(16,x,5,3,"div",7),i.YNc(17,N,5,2,"div",7),i.TgZ(18,"div",8),i.NdJ("click",function(){return n.AcceptRequest()}),i.TgZ(19,"mat-icon",9),i._uU(20,"check_circle"),i.qZA()(),i.TgZ(21,"div",8),i.NdJ("click",function(){return n.DenyRequest()}),i.TgZ(22,"mat-icon",10),i._uU(23,"cancel"),i.qZA()(),i.TgZ(24,"div",11),i.NdJ("click",function(){return n.AcceptRequest()}),i.TgZ(25,"mat-icon",10),i._uU(26,"check_circle"),i.qZA()(),i.TgZ(27,"div",12),i.NdJ("click",function(){return n.DenyRequest()}),i.TgZ(28,"mat-icon",10),i._uU(29,"cancel"),i.qZA()()()),2&t&&(i.xp6(1),i.Q6J("ngIf","friend_request"==n.requestType),i.xp6(1),i.Q6J("ngIf","invite_request"==n.requestType||"join_request"==n.requestType),i.xp6(1),i.Q6J("ngIf","friend_request"==n.requestType),i.xp6(1),i.Q6J("ngIf","invite_request"==n.requestType||"join_request"==n.requestType),i.xp6(5),i.Oqu(n.requestType),i.xp6(5),i.AsE("",n.fromName," ",n.fromSurname,""),i.xp6(1),i.Q6J("ngIf","invite_request"==n.requestType||"join_request"==n.requestType),i.xp6(1),i.Q6J("ngIf","invite_request"==n.requestType||"join_request"==n.requestType),i.xp6(1),i.Q6J("ngIf","invite_request"==n.requestType||"join_request"==n.requestType))},dependencies:[r.O5,g.Hw],styles:["div[_ngcontent-%COMP%]{width:101%;position:relative;display:inline-block;flex-direction:column;background-color:#87abee;justify-content:flex-start;align-items:flex-start;color:#fff;border-radius:30px}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;width:100%;font-size:15px;overflow:hidden;padding-left:25px;margin-top:5px}.data[_ngcontent-%COMP%]{margin-top:3px;font-weight:400}.iconNoOversize[_ngcontent-%COMP%]{position:relative;transform:scale(1.7);z-index:10}.icon[_ngcontent-%COMP%]{background-color:transparent;position:absolute;transform:scale(1.7);z-index:10}.iconsContainer[_ngcontent-%COMP%]{position:absolute;display:flex;flex-direction:column;width:10%;color:#fff}.phoneIcon[_ngcontent-%COMP%]{background-color:transparent;display:flex;justify-content:flex-end;align-items:flex-end;top:30px;width:95%;color:#fff;z-index:30}.phoneIcon2[_ngcontent-%COMP%]{background-color:transparent;display:flex;justify-content:flex-end;align-items:flex-end;bottom:10px;right:20px;width:100%;color:#fff;z-index:30}#icon1Desk[_ngcontent-%COMP%], #icon2Desk[_ngcontent-%COMP%]{display:none}@media only screen and (min-width: 500px){.phoneIcon[_ngcontent-%COMP%], .phoneIcon2[_ngcontent-%COMP%]{display:none}#icon1Desk[_ngcontent-%COMP%], #icon2Desk[_ngcontent-%COMP%]{display:flex}div[_ngcontent-%COMP%]{width:101%;height:65px;display:flex;flex-direction:row;background-color:#87abee;justify-content:space-around;align-items:center;color:#fff;overflow:hidden;border-radius:0}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;width:25%;font-size:15px;overflow:hidden}.data[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;font-weight:400}.iconNoOversize[_ngcontent-%COMP%], .icon[_ngcontent-%COMP%]{position:relative;transform:scale(1.7);z-index:10}.iconsContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:10%;color:#fff}.icon[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(2);transition:transform .2s ease-in-out}.icon[_ngcontent-%COMP%]:not(:hover){transform:scale(1.7);transition:transform .2s ease-in-out}}"]}),e})();function S(e,o){if(1&e){const t=i.EpF();i.ynx(0),i.TgZ(1,"app-notification-field",6),i.NdJ("notificationAcceptEmitter",function(c){i.CHM(t);const s=i.oxw();return i.KtG(s.notificationAcceptTrigger(c))}),i.qZA(),i.BQk()}if(2&e){const t=o.$implicit;i.xp6(1),i.Q6J("idNotification",t.ID)("requestType",t.type)("fromEmail",t.cod_sender)("fromName",t.name_sender)("fromSurname",t.surname_sender)("activityTitle",t.activity_title)("idActivity",t.cod_activity)}}function A(e,o){if(1&e){const t=i.EpF();i.ynx(0),i.TgZ(1,"app-notification-field",7),i.NdJ("notificationAcceptEmitter",function(c){i.CHM(t);const s=i.oxw();return i.KtG(s.notificationAcceptTrigger(c))}),i.qZA(),i.BQk()}if(2&e){const t=o.$implicit;i.xp6(1),i.Q6J("idNotification",t.ID)("requestType",t.type)("fromEmail",t.cod_sender)("fromName",t.name_sender)("fromSurname",t.surname_sender)("activityTitle",t.activity_title)("idActivity",t.cod_activity)("activityDate",t.date)("activityTimeStart",t.time_start)("activityTimeEnd",t.time_end)}}function C(e,o){if(1&e){const t=i.EpF();i.ynx(0),i.TgZ(1,"app-notification-field",7),i.NdJ("notificationAcceptEmitter",function(c){i.CHM(t);const s=i.oxw();return i.KtG(s.notificationAcceptTrigger(c))}),i.qZA(),i.BQk()}if(2&e){const t=o.$implicit;i.xp6(1),i.Q6J("idNotification",t.ID)("requestType",t.type)("fromEmail",t.cod_sender)("fromName",t.name_sender)("fromSurname",t.surname_sender)("activityTitle",t.activity_title)("idActivity",t.cod_activity)("activityDate",t.date)("activityTimeStart",t.time_start)("activityTimeEnd",t.time_end)}}const w=[{path:"",component:(()=>{class e{constructor(t,n){this.dataSessionService=t,this.router=n,this.friendNotificationsList=[],this.activityNotificationsList=[],this.activityJoinNotificationsList=[],this.dataSessionService.getUser()?t.DBfetchUserWithoutToken(this.dataSessionService.getUser().email,this.dataSessionService.getUser().password).then(()=>{this.friendNotificationsList=[],this.activityNotificationsList=[],this.activityJoinNotificationsList=[];for(let c of this.dataSessionService.getUser().newNotifications)"friend_request"==c.type&&this.friendNotificationsList.push(c),"invite_request"==c.type&&this.activityNotificationsList.push(c),"join_request"==c.type&&this.activityJoinNotificationsList.push(c);console.log(this.dataSessionService.getUser())}):(console.log("user not set"),this.router.navigate(["/login"]))}notificationAcceptTrigger(t){console.log("\xe8 stata accettata una notifica"),this.dataSessionService.DBfetchUserWithoutToken(this.dataSessionService.getUser().email,this.dataSessionService.getUser().password).then(()=>{this.friendNotificationsList=[],this.activityNotificationsList=[],this.activityJoinNotificationsList=[];for(let n of this.dataSessionService.getUser().newNotifications)"friend_request"==n.type&&this.friendNotificationsList.push(n),"invite_request"==n.type&&this.activityNotificationsList.push(n),"join_request"==n.type&&this.activityJoinNotificationsList.push(n)})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(l.C),i.Y36(d.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-notifications"]],decls:15,vars:3,consts:[["id","Title"],["id","containerMain"],["id","notificationsList"],[1,"container"],[2,"padding-bottom","10px","padding-left","20px","margin-top","20px"],[4,"ngFor","ngForOf"],[3,"idNotification","requestType","fromEmail","fromName","fromSurname","activityTitle","idActivity","notificationAcceptEmitter"],[3,"idNotification","requestType","fromEmail","fromName","fromSurname","activityTitle","idActivity","activityDate","activityTimeStart","activityTimeEnd","notificationAcceptEmitter"]],template:function(t,n){1&t&&(i.TgZ(0,"div",0),i._uU(1,"Notifications"),i.qZA(),i.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"span",4),i._uU(6,"Friend Request"),i.qZA(),i.YNc(7,S,2,7,"ng-container",5),i.TgZ(8,"span",4),i._uU(9,"Your Activity Invite"),i.qZA(),i.YNc(10,A,2,10,"ng-container",5),i.TgZ(11,"span",4),i._uU(12,"Public Activity Join Request"),i.qZA(),i.YNc(13,C,2,10,"ng-container",5),i.qZA()()(),i._UZ(14,"app-side-menu")),2&t&&(i.xp6(7),i.Q6J("ngForOf",n.friendNotificationsList),i.xp6(3),i.Q6J("ngForOf",n.activityNotificationsList),i.xp6(3),i.Q6J("ngForOf",n.activityJoinNotificationsList))},dependencies:[r.sg,p.V,q],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%;margin:0}#Title[_ngcontent-%COMP%]{position:relative;color:#6495ed;display:flex;width:100%;justify-content:flex-start;padding-bottom:40px;padding-left:65px;font-size:30px;font-weight:700;padding-top:30px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}#containerMain[_ngcontent-%COMP%]{margin-left:2%;margin-right:2%;display:flex;height:530px;width:95%;grid-template-columns:[c1] 68% [c2] 32%;grid-template-rows:[r1] 25% [r2] 75%}#notificationsList[_ngcontent-%COMP%]{border:3px solid cornflowerblue;height:99%;width:100%;border-radius:30px;margin-left:2%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000}app-search-bar[_ngcontent-%COMP%]{width:50%}.container[_ngcontent-%COMP%]{overflow:scroll;position:relative;color:#6495ed;display:flex;flex-direction:column;width:100%;justify-content:flex-start;padding-bottom:20px;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-notification-field[_ngcontent-%COMP%]{margin-bottom:3px}@media only screen and (min-width: 500px){#Title[_ngcontent-%COMP%]{position:relative;color:#6495ed;display:flex;width:100%;justify-content:flex-start;padding-bottom:40px;padding-left:80px;font-size:40px;font-weight:700;padding-top:30px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}#containerMain[_ngcontent-%COMP%]{margin-left:50px;margin-right:0%;display:flex;height:690px;width:96%;grid-template-columns:[c1] 68% [c2] 25%;grid-template-rows:[r1] 25% [r2] 75%}#notificationsList[_ngcontent-%COMP%]{border:3px solid cornflowerblue;height:99%;width:100%;border-radius:30px;margin-left:2%;margin-right:1%;display:flex;overflow:scroll;flex-wrap:wrap;justify-content:center;box-shadow:inset 0 -3em 3em #0000,0 0 0 2px #fff,.3em .3em 1em #000}app-search-bar[_ngcontent-%COMP%]{width:50%}.container[_ngcontent-%COMP%]{overflow:scroll;position:relative;color:#6495ed;display:flex;flex-direction:column;width:100%;justify-content:flex-start;padding-bottom:20px;font-size:22px;font-weight:700;padding-top:20px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}app-notification-field[_ngcontent-%COMP%]{margin-bottom:3px}}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[d.Bz.forChild(w),d.Bz]}),e})();var M=a(9360);let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[r.ez,Z,M.q]}),e})()}}]);